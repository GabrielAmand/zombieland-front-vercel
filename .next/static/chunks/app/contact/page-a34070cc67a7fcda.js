(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[977],{1114:(e,t,r)=>{"use strict";r.d(t,{default:()=>y});var a=r(5155);class o{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}let s={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:(()=>{if("undefined"!=typeof localStorage)return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}})()},i=e=>e?"string"==typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{},n=async(e,t,r={})=>{let a=await fetch(s.origin+e,{method:"POST",headers:r,body:t}),i=await a.text(),n=new o(a.status,i);if(a.ok)return n;throw n},l=(e,t,r)=>{if(!e||"string"!=typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||"string"!=typeof t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r||"string"!=typeof r)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},c=e=>e.webdriver||!e.languages||0===e.languages.length,u=()=>new o(451,"Unavailable For Headless Browser"),d=(e,t)=>{if((e=>!e.list?.length||!e.watchVariable)(e))return!1;var r=e.list,a=e.watchVariable;if(!Array.isArray(r))throw"The BlockList list has to be an array";if("string"!=typeof a)throw"The BlockList watchVariable has to be a string";let o=((e,t)=>e instanceof FormData?e.get(t):e[t])(t,e.watchVariable);return"string"==typeof o&&e.list.includes(o)},m=()=>new o(403,"Forbidden"),p=async(e,t,r)=>{let a=Number(await r.get(e)||0);return t-Date.now()+a},h=async(e,t,r)=>{if(!t.throttle||!r)return!1;((e,t)=>{if("number"!=typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&"string"!=typeof t)throw"The LimitRate ID has to be a non-empty string"})(t.throttle,t.id);let a=t.id||e;return await p(a,t.throttle,r)>0||(await r.set(a,Date.now().toString()),!1)},b=()=>new o(429,"Too Many Requests"),f={send:async(e,t,r,a)=>{let o=i(a),p=o.publicKey||s.publicKey,f=o.blockHeadless||s.blockHeadless,g=o.storageProvider||s.storageProvider,x={...s.blockList,...o.blockList},v={...s.limitRate,...o.limitRate};return f&&c(navigator)?Promise.reject(u()):(l(p,e,t),(e=>{if(e&&"[object Object]"!==e.toString())throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"})(r),r&&d(x,r))?Promise.reject(m()):await h(location.pathname,v,g)?Promise.reject(b()):n("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:p,service_id:e,template_id:t,template_params:r}),{"Content-type":"application/json"})}};var g=r(2115),x=r(4831),v=r(9509);function y(){let{token:e}=(0,x.W)(),[t,r]=(0,g.useState)(""),[o,s]=(0,g.useState)(""),[i,n]=(0,g.useState)(""),[l,c]=(0,g.useState)(""),[u,d]=(0,g.useState)(""),[m,p]=(0,g.useState)(""),h=async a=>{if(a.preventDefault(),d(""),p(""),!e)return void d("Vous devez \xeatre connect\xe9 pour envoyer un message.");try{await f.send(v.env.NEXT_PUBLIC_EMAILJS_SERVICE_ID,v.env.NEXT_PUBLIC_EMAILJS_TEMPLATE_ID,{firstname:t,lastname:o,email:i,message:l,reply_to:i},v.env.NEXT_PUBLIC_EMAILJS_PUBLIC_KEY),p("Message envoy\xe9 avec succ\xe8s !"),r(""),s(""),n(""),c("")}catch(e){console.error(e),d("Erreur lors de lâ€™envoi du message.")}};return(0,a.jsxs)("form",{onSubmit:h,className:"flex flex-col gap-4 w-full max-w-xl mx-auto bg-surface bg-opacity-90 backdrop-blur-sm p-6 rounded-lg border border-primary shadow-lg",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"firstname",className:"text-primary-light font-subtitle uppercase text-xl",children:"Pr\xe9nom"}),(0,a.jsx)("input",{type:"text",id:"firstname",value:t,onChange:e=>r(e.target.value),required:!0,className:"bg-bg text-text border border-muted rounded-lg px-3 py-2 placeholder:text-muted focus:outline-none focus:border-primary",placeholder:""})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"lastname",className:"text-primary-light font-subtitle uppercase text-xl",children:"Nom"}),(0,a.jsx)("input",{type:"text",id:"lastname",value:o,onChange:e=>s(e.target.value),required:!0,className:"bg-bg text-text border border-muted rounded-lg px-3 py-2 placeholder:text-muted focus:outline-none focus:border-primary",placeholder:"Votre nom"})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"email",className:"text-primary-light font-subtitle uppercase text-xl",children:"Email"}),(0,a.jsx)("input",{type:"email",id:"email",value:i,onChange:e=>n(e.target.value),required:!0,className:"bg-bg text-text border border-muted rounded-lg px-3 py-2 placeholder:text-muted focus:outline-none focus:border-primary",placeholder:"votre@email.com"})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"message",className:"text-primary-light font-subtitle uppercase text-xl",children:"Message"}),(0,a.jsx)("textarea",{id:"message",value:l,onChange:e=>c(e.target.value),required:!0,rows:5,className:"bg-bg text-text border border-muted rounded-lg px-3 py-2 placeholder:text-muted focus:outline-none focus:border-primary",placeholder:"Votre message"})]}),u&&(0,a.jsx)("p",{className:"text-red-500 text-sm font-body",children:u}),m&&(0,a.jsx)("p",{className:"text-green-600 text-sm font-body",children:m}),(0,a.jsx)("button",{type:"submit",className:"bg-primary text-black font-subtitle uppercase tracking-wide py-2 rounded-lg hover:bg-primary-dark transition",children:"Envoyer"})]})}},4831:(e,t,r)=>{"use strict";r.d(t,{W:()=>c,x:()=>l});var a=r(5155),o=r(7383),s=r(2115),i=r(9509);let n=(0,s.createContext)({token:null,setToken:()=>{},user:null,loading:!0}),l=e=>{let{children:t}=e,[r,l]=(0,s.useState)(()=>o.A.get("zombieland_token")||null),[c,u]=(0,s.useState)(null),[d,m]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{(async()=>{if(!r){u(null),m(!1);return}try{let e=await fetch("".concat(i.env.NEXT_PUBLIC_API_URL,"/auth/verify"),{headers:{Authorization:"Bearer ".concat(r)},credentials:"include"});if(e.ok){let t=await e.json();u(t.user)}else o.A.remove("zombieland_token"),l(null),u(null)}catch(e){console.error("Erreur lors du check token :",e),o.A.remove("zombieland_token"),l(null),u(null)}finally{m(!1)}})()},[r]),(0,a.jsx)(n.Provider,{value:{token:r,setToken:e=>{e?(o.A.set("zombieland_token",e,{expires:1,secure:!0,sameSite:"strict"}),l(e)):(o.A.remove("zombieland_token"),l(null),u(null))},user:c,loading:d},children:t})},c=()=>(0,s.useContext)(n)},7383:(e,t,r)=>{"use strict";function a(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)e[a]=r[a]}return e}r.d(t,{A:()=>o});var o=function e(t,r){function o(e,o,s){if("undefined"!=typeof document){"number"==typeof(s=a({},r,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var n in s)s[n]&&(i+="; "+n,!0!==s[n]&&(i+="="+s[n].split(";")[0]));return document.cookie=e+"="+t.write(o,e)+i}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],a={},o=0;o<r.length;o++){var s=r[o].split("="),i=s.slice(1).join("=");try{var n=decodeURIComponent(s[0]);if(a[n]=t.read(i,n),e===n)break}catch(e){}}return e?a[e]:a}},remove:function(e,t){o(e,"",a({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,a({},this.attributes,t))},withConverter:function(t){return e(a({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},9280:(e,t,r)=>{Promise.resolve().then(r.bind(r,1114))}},e=>{e.O(0,[441,964,358],()=>e(e.s=9280)),_N_E=e.O()}]);