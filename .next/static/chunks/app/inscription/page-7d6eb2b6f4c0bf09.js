(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[819],{306:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]])},2364:(e,t,r)=>{Promise.resolve().then(r.bind(r,9011))},2383:(e,t,r)=>{"use strict";r.d(t,{e:()=>n});var a=r(9509);function n(){if(!a.env.NEXT_PUBLIC_API_URL)throw Error("NEXT_PUBLIC_API_URL n'est pas d\xe9finie.");return a.env.NEXT_PUBLIC_API_URL}},4831:(e,t,r)=>{"use strict";r.d(t,{W:()=>c,x:()=>i});var a=r(5155),n=r(7383),o=r(2115),s=r(9509);let l=(0,o.createContext)({token:null,setToken:()=>{},user:null,loading:!0}),i=e=>{let{children:t}=e,[r,i]=(0,o.useState)(()=>n.A.get("zombieland_token")||null),[c,d]=(0,o.useState)(null),[u,p]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{(async()=>{if(!r){d(null),p(!1);return}try{let e=await fetch("".concat(s.env.NEXT_PUBLIC_API_URL,"/auth/verify"),{headers:{Authorization:"Bearer ".concat(r)},credentials:"include"});if(e.ok){let t=await e.json();d(t.user)}else n.A.remove("zombieland_token"),i(null),d(null)}catch(e){console.error("Erreur lors du check token :",e),n.A.remove("zombieland_token"),i(null),d(null)}finally{p(!1)}})()},[r]),(0,a.jsx)(l.Provider,{value:{token:r,setToken:e=>{e?(n.A.set("zombieland_token",e,{expires:1,secure:!0,sameSite:"strict"}),i(e)):(n.A.remove("zombieland_token"),i(null),d(null))},user:c,loading:u},children:t})},c=()=>(0,o.useContext)(l)},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},7383:(e,t,r)=>{"use strict";function a(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)e[a]=r[a]}return e}r.d(t,{A:()=>n});var n=function e(t,r){function n(e,n,o){if("undefined"!=typeof document){"number"==typeof(o=a({},r,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var l in o)o[l]&&(s+="; "+l,!0!==o[l]&&(s+="="+o[l].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+s}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],a={},n=0;n<r.length;n++){var o=r[n].split("="),s=o.slice(1).join("=");try{var l=decodeURIComponent(o[0]);if(a[l]=t.read(s,l),e===l)break}catch(e){}}return e?a[e]:a}},remove:function(e,t){n(e,"",a({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,a({},this.attributes,t))},withConverter:function(t){return e(a({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},9011:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var a=r(5155),n=r(306),o=r(6874),s=r.n(o),l=r(5695),i=r(2115),c=r(4831),d=r(2383);function u(){let{setToken:e}=(0,c.W)(),t=(0,l.useRouter)(),r=(0,l.useSearchParams)(),[o,u]=(0,i.useState)(""),[p,m]=(0,i.useState)(""),[x,h]=(0,i.useState)(""),[f,b]=(0,i.useState)("votre@email.com"),[g,v]=(0,i.useState)("password"),[y,w]=(0,i.useState)({}),[N,k]=(0,i.useState)(""),j=async a=>{a.preventDefault(),w({}),k("");let n=x.replace(/\D/g,"");if(!/^0[1-9]\d{8}$/.test(n))return void k("Num\xe9ro de t\xe9l\xe9phone invalide.");try{let a=await fetch("".concat((0,d.e)(),"/signUp"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstname:o,lastname:p,email:f,password:g,phone:x.replace(/\D/g,"")}),credentials:"include"}),n=await a.json();if(!a.ok){if(400===a.status&&Array.isArray(n.errors)){let e=Object.fromEntries(n.errors.map(e=>[e.path[0],e.message]));w(e);return}if(409===a.status&&"string"==typeof n.error)return void(n.error.toLowerCase().includes("email")?w({email:n.error}):n.error.toLowerCase().includes("t\xe9l\xe9phone")?w({phone:n.error}):k(n.error));k(n.error||"Erreur lors de l'inscription.");return}e(n.token);let s=r.get("redirect")||"/reservations";t.push(s)}catch(e){e instanceof Error?(console.error(e),k("Identifiants invalides ou erreur serveur.")):(console.error("Unknown error",e),k("Erreur inconnue."))}};return(0,a.jsxs)("form",{onSubmit:j,className:"flex flex-col gap-4 w-full max-w-xl mx-auto bg-surface bg-opacity-90 backdrop-blur-sm p-6 rounded-lg border border-primary shadow-lg",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("label",{htmlFor:"firstName",className:"text-primary-light font-subtitle uppercase tracking-wide text-xl",children:"Pr\xe9nom"}),(0,a.jsx)("input",{id:"firstName",name:"firstName",type:"text",placeholder:"votre pr\xe9nom",value:o,onChange:e=>u(e.target.value),required:!0,className:"bg-bg text-text border rounded-lg px-3 py-2 focus:outline-none font-body text xl\n						".concat(y.firstname?"border-red-500 border-2":"border-muted"," \n						focus:border-primary placeholder:text-muted")}),y.firstname&&(0,a.jsx)("p",{className:"text-red-500 text-sm font-body",children:y.firstname})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("label",{htmlFor:"lastName",className:"text-primary-light font-subtitle uppercase tracking-wide text-xl",children:"Nom"}),(0,a.jsx)("input",{id:"lastName",name:"lastName",type:"text",placeholder:"votre nom",value:p,onChange:e=>m(e.target.value),required:!0,className:"bg-bg text-text border rounded-lg px-3 py-2 focus:outline-none font-body text xl\n						".concat(y.lastname?"border-red-500 border-2":"border-muted"," \n						focus:border-primary placeholder:text-muted")}),y.lastname&&(0,a.jsx)("p",{className:"text-red-500 text-sm font-body",children:y.lastname})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("label",{htmlFor:"email",className:"text-primary-light font-subtitle uppercase tracking-wide text-xl",children:"Email"}),(0,a.jsx)("input",{id:"email",name:"email",type:"email",placeholder:"votre@email.com",value:f,onChange:e=>b(e.target.value),required:!0,className:"bg-bg text-text border rounded-lg px-3 py-2 focus:outline-none font-body text xl\n						".concat(y.email?"border-red-500 border-2":"border-muted"," \n						focus:border-primary placeholder:text-muted")}),y.email&&(0,a.jsx)("p",{className:"text-red-500 text-sm font-body",children:y.email})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("label",{htmlFor:"phone",className:"text-primary-light font-subtitle uppercase tracking-wide text-xl",children:"T\xe9l\xe9phone"}),(0,a.jsx)("input",{id:"phone",name:"phone",type:"tel",placeholder:"votre t\xe9l\xe9phone",value:x,onChange:e=>h(e.target.value.replace(/\D/g,"").slice(0,10).replace(/(\d{2})(?=\d)/g,"$1 ").trim()),required:!0,className:"bg-bg text-text border rounded-lg px-3 py-2 focus:outline-none font-body text xl\n						".concat(y.phone?"border-red-500 border-2":"border-muted"," \n						focus:border-primary placeholder:text-muted")}),y.phone&&(0,a.jsx)("p",{className:"text-red-500 text-sm font-body",children:y.phone})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("label",{htmlFor:"password",className:"text-primary-light font-subtitle uppercase tracking-wide text-xl",children:"Mot de passe"}),(0,a.jsx)("input",{id:"password",name:"password",type:"password",placeholder:"password",value:g,onChange:e=>v(e.target.value),required:!0,className:"bg-bg text-text border rounded-lg px-3 py-2 focus:outline-none font-body text xl\n						".concat(y.password?"border-red-500 border-2":"border-muted"," \n						focus:border-primary placeholder:text-muted")}),y.password&&(0,a.jsx)("p",{className:"text-red-500 text-sm font-body",children:y.password})]}),(0,a.jsxs)("div",{className:"flex items-start gap-2 mt-4",children:[(0,a.jsx)("input",{type:"checkbox",id:"acceptPrivacy",name:"acceptPrivacy",required:!0,className:"mt-1 accent-primary w-5 h-5"}),(0,a.jsxs)("label",{htmlFor:"acceptPrivacy",className:"text-primary-light font-subtitle uppercase tracking-wide text-xl",children:["J'accepte la"," ",(0,a.jsx)(s(),{href:"/mentions-legales#confidentialite",target:"_blank",rel:"noopener",className:"underline hover:text-primary-dark transition",children:"politique de confidentialit\xe9"})]})]}),N&&(0,a.jsx)("p",{className:"text-red-500 text-sm font-body",children:N}),(0,a.jsxs)("button",{type:"submit",className:"bg-primary text-black font-subtitle uppercase tracking-wide py-2 rounded-lg hover:bg-primary-dark transition flex items-center justify-center gap-2",children:[(0,a.jsx)(n.A,{size:18}),"M'inscrire"]})]})}},9946:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(2115);let n=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},o=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:d,iconNode:u,...p}=e;return(0,a.createElement)("svg",{ref:t,...s,width:n,height:n,stroke:r,strokeWidth:i?24*Number(l)/Number(n):l,className:o("lucide",c),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(p)&&{"aria-hidden":"true"},...p},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),i=(e,t)=>{let r=(0,a.forwardRef)((r,s)=>{let{className:i,...c}=r;return(0,a.createElement)(l,{ref:s,iconNode:t,className:o("lucide-".concat(n(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),i),...c})});return r.displayName=n(e),r}}},e=>{e.O(0,[874,441,964,358],()=>e(e.s=2364)),_N_E=e.O()}]);