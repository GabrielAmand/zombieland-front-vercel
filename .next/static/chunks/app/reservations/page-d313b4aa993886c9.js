(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[796],{4831:(e,t,r)=>{"use strict";r.d(t,{W:()=>l,x:()=>s});var n=r(5155),o=r(7383),a=r(2115),i=r(9509);let u=(0,a.createContext)({token:null,setToken:()=>{},user:null,loading:!0}),s=e=>{let{children:t}=e,[r,s]=(0,a.useState)(()=>o.A.get("zombieland_token")||null),[l,c]=(0,a.useState)(null),[d,m]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{if(!r){c(null),m(!1);return}try{let e=await fetch("".concat(i.env.NEXT_PUBLIC_API_URL,"/auth/verify"),{headers:{Authorization:"Bearer ".concat(r)},credentials:"include"});if(e.ok){let t=await e.json();c(t.user)}else o.A.remove("zombieland_token"),s(null),c(null)}catch(e){console.error("Erreur lors du check token :",e),o.A.remove("zombieland_token"),s(null),c(null)}finally{m(!1)}})()},[r]),(0,n.jsx)(u.Provider,{value:{token:r,setToken:e=>{e?(o.A.set("zombieland_token",e,{expires:1,secure:!0,sameSite:"strict"}),s(e)):(o.A.remove("zombieland_token"),s(null),c(null))},user:l,loading:d},children:t})},l=()=>(0,a.useContext)(u)},4983:(e,t,r)=>{Promise.resolve().then(r.bind(r,9980))},5695:(e,t,r)=>{"use strict";var n=r(8999);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},7383:(e,t,r)=>{"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}r.d(t,{A:()=>o});var o=function e(t,r){function o(e,o,a){if("undefined"!=typeof document){"number"==typeof(a=n({},r,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var u in a)a[u]&&(i+="; "+u,!0!==a[u]&&(i+="="+a[u].split(";")[0]));return document.cookie=e+"="+t.write(o,e)+i}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},o=0;o<r.length;o++){var a=r[o].split("="),i=a.slice(1).join("=");try{var u=decodeURIComponent(a[0]);if(n[u]=t.read(i,u),e===u)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){o(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},9980:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var n=r(5155),o=r(5695),a=r(2115),i=r(4831);function u(){let{token:e}=(0,i.W)(),t=(0,o.useRouter)(),[r,u]=(0,a.useState)(""),[s,l]=(0,a.useState)(void 0),[c,d]=(0,a.useState)(0),m=new Date().toISOString().split("T")[0];return(0,a.useEffect)(()=>{let r=localStorage.getItem("zombieland_reservation");e&&r&&t.push("/paiement")},[e,t]),(0,a.useEffect)(()=>{if(!r||!s||s<=0)return;let e=(null!=s?s:0)*66;d(e),localStorage.setItem("zombieland_reservation",JSON.stringify({date:r,visitors:s,calculatedPrice:e}))},[s,r]),(0,n.jsxs)("form",{onSubmit:r=>{r.preventDefault(),e?t.push("/paiement"):t.push("/connexion?redirect=/paiement")},className:"     flex flex-col gap-4 w-full max-w-sm mx-auto     bg-surface bg-opacity-90 backdrop-blur-sm     p-6 rounded-lg border border-primary shadow-lg    ",children:[(0,n.jsx)("label",{htmlFor:"visitors",className:"text-primary-light font-subtitle uppercase tracking-wide text-xl",children:"Nombre de visiteurs"}),(0,n.jsx)("input",{id:"visitors",type:"number",min:1,value:null!=s?s:"",onChange:e=>{let t=e.target.value;l(""===t?void 0:Number(t))},placeholder:"Entrez le nombre de visiteurs",required:!0,className:"p-2 rounded bg-background border border-primary text-text"}),(0,n.jsx)("label",{htmlFor:"date",className:"text-primary-light font-subtitle uppercase tracking-wide text-xl",children:"Date"}),(0,n.jsx)("input",{id:"date",type:"date",value:r,min:m,onChange:e=>u(e.target.value),required:!0,className:"p-2 rounded bg-background border border-primary text-text"}),(0,n.jsxs)("p",{className:"text-lg font-semibold text-text",children:["Tarif calcul\xe9 : ",c," â‚¬"]}),(0,n.jsx)("button",{type:"submit",className:"bg-primary-light text-black font-bold py-2 rounded hover:bg-primary transition border border-primary",children:"Valider ma r\xe9servation"})]})}}},e=>{e.O(0,[441,964,358],()=>e(e.s=4983)),_N_E=e.O()}]);